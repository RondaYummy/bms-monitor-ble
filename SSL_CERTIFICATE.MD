üõ°Ô∏è –û—Ç—Ä–∏–º–∞–Ω–Ω—è SSL-—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞: –ú–µ—Ç–æ–¥ DNS-01 (Certbot Manual)
–û—Å–∫—ñ–ª—å–∫–∏ –ø–æ—Ä—Ç–∏ 80/443 –º–æ–∂—É—Ç—å –±—É—Ç–∏ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω—ñ, –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –º–µ—Ç–æ–¥ DNS-01 (—á–µ—Ä–µ–∑ --manual —Ç–∞ --preferred-challenges dns), —è–∫–∏–π –¥–æ–≤–æ–¥–∏—Ç—å –≤–æ–ª–æ–¥—ñ–Ω–Ω—è –¥–æ–º–µ–Ω–æ–º —à–ª—è—Ö–æ–º –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ–≥–æ TXT-–∑–∞–ø–∏—Å—É –¥–æ –≤–∞—à–æ–≥–æ DNS.

–¶–µ–π –ø—Ä–æ—Ü–µ—Å —î –Ω–∞–ø—ñ–≤–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º —ñ –≤–∏–º–∞–≥–∞—î —Ä—É—á–Ω–æ–≥–æ –≤—Ç—Ä—É—á–∞–Ω–Ω—è.

1. –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø–∏—Ç—É —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞
–©–æ—Ä–∞–∑—É, –∫–æ–ª–∏ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ –∞–±–æ –ø–æ–Ω–æ–≤–∏—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—É –∫–æ–º–∞–Ω–¥—É:

–ö–æ–º–∞–Ω–¥–∞ —è–∫–∞ –æ–Ω–æ–≤–ª—é—î —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç —Ç–∞ –æ–¥—Ä–∞–∑—É –∑–∞–ø–∏—Å—É—î –≤ –±–∞–∑—É –¥–∞—Ç—É –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞:
```bash
sudo certbot certonly --manual --preferred-challenges dns -d solar.levych.com && CURRENT_DATE=$(date -u +%Y-%m-%dT%H:%M:%SZ) && docker exec bms-monitor-ble-python-app-1 sqlite3 /app/data/bms_data.db "INSERT INTO ssl_certificates (created_at, days) VALUES ('$CURRENT_DATE', 90);"
```

–¢–∞ —Å–∞–º–∞ –∫–æ–º–∞–Ω–¥–∞, —Ç—Ä—ñ—à–∫–∏ –±–µ–∑–ø–µ—á–Ω—ñ—à–∞ –±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤–±—É–¥–æ–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó sqlite3:
```bash
sudo certbot certonly --manual --preferred-challenges dns -d solar.levych.com && docker exec bms-monitor-ble-python-app-1 sqlite3 /app/data/bms_data.db "INSERT INTO ssl_certificates (created_at, days) VALUES (datetime('now', 'utc'), 90);"
```

```bash
sudo certbot certonly --manual --preferred-challenges dns -d solar.levych.com
```

2. –ü—Ä–æ—Ü–µ—Å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ (Challenge)
–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –∫–æ–º–∞–Ω–¥–∏ Certbot –∑—Ä–æ–±–∏—Ç—å –Ω–∞—Å—Ç—É–ø–Ω–µ:
 2.1. –ó—É–ø–∏–Ω–∫–∞ —Ç–∞ –∑–∞–ø–∏—Ç: Certbot –ø—Ä–∏–∑—É–ø–∏–Ω–∏—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —ñ –∑–≥–µ–Ω–µ—Ä—É—î —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π —Ä—è–¥–æ–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ (Challenge String).
 2.2. –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è: Certbot –ø–æ–ø—Ä–æ—Å–∏—Ç—å –≤–∞—Å —Å—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π DNS-–∑–∞–ø–∏—Å —Ç–∏–ø—É TXT —ñ–∑ –ø–µ–≤–Ω–∏–º —ñ–º'—è–º —Ç–∞ –∑–Ω–∞—á–µ–Ω–Ω—è–º.

 –ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø–∏—Ç—É –≤—ñ–¥ Certbot:
 ```bash
 Please deploy a DNS TXT record under the name
_acme-challenge.solar.levych.com with the following value:

[–£–ù–Ü–ö–ê–õ–¨–ù–ò–ô_–°–¢–†–û–ö_–ü–ï–†–ï–í–Ü–†–ö–ò]

Before continuing, verify the record is deployed.
- Press Enter to Continue
```

üéØ –í–∞—à—ñ –¥—ñ—ó (–ö—Ä–æ–∫ —É DNS-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ)
–í–∞–º –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –∑–∞–π—Ç–∏ –≤ –ø–∞–Ω–µ–ª—å –∫–µ—Ä—É–≤–∞–Ω–Ω—è –≤–∞—à–æ–≥–æ DNS-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, GoDaddy) —ñ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π –∑–∞–ø–∏—Å:

**–¢–∏–ø:** TXT	–¢–∏–ø –∑–∞–ø–∏—Å—É
**–Ü–º'—è / –•–æ—Å—Ç:** _acme-challenge.solar	**–í–∞–∂–ª–∏–≤–æ:** Certbot –ø—Ä–æ—Å–∏—Ç—å –ø–æ–≤–Ω–µ —ñ–º'—è _acme-challenge.solar.levych.com. –ù–∞ –±—ñ–ª—å—à–æ—Å—Ç—ñ –ø–∞–Ω–µ–ª–µ–π –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–≤–µ—Å—Ç–∏ –ª–∏—à–µ –ø—Ä–µ—Ñ—ñ–∫—Å _acme-challenge.solar.
**–ó–Ω–∞—á–µ–Ω–Ω—è:** [–£–ù–Ü–ö–ê–õ–¨–ù–ò–ô_–†–Ø–î–û–ö_–ü–ï–†–ï–í–Ü–†–ö–ò]	–£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —Ä—è–¥–æ–∫, —è–∫–∏–π Certbot —â–æ–π–Ω–æ –Ω–∞–¥–∞–≤.
**TTL:** 60 –∞–±–æ 300 (–º—ñ–Ω—ñ–º–∞–ª—å–Ω–µ)	–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —á–∞—Å –∂–∏—Ç—Ç—è (Time To Live), —â–æ–± –∑–∞–ø–∏—Å —à–≤–∏–¥–∫–æ –ø–æ—à–∏—Ä–∏–≤—Å—è.

3. –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
–û—á—ñ–∫—É–≤–∞–Ω–Ω—è –ø–æ—à–∏—Ä–µ–Ω–Ω—è: –ü—ñ—Å–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–∞–ø–∏—Å—É –≤ DNS, –∑–∞—á–µ–∫–∞–π—Ç–µ 30-60 —Å–µ–∫—É–Ω–¥ (–∞–±–æ –±—ñ–ª—å—à–µ, —è–∫—â–æ –≤–∞—à TTL –≤–∏—Å–æ–∫–∏–π), —â–æ–± –∑–∞–ø–∏—Å –ø–æ—à–∏—Ä–∏–≤—Å—è –ø–æ –≤—Å—å–æ–º—É —Å–≤—ñ—Ç—É.

–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è: –ü–æ–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ —Ç–µ—Ä–º—ñ–Ω–∞–ª—É, –¥–µ –ø—Ä–∞—Ü—é—î Certbot, —Ç–∞ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å `Enter`.
–§—ñ–Ω–∞–ª—ñ–∑–∞—Ü—ñ—è: Certbot –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø–∏—Ç –¥–æ Let's Encrypt. Let's Encrypt –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å, —á–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –≤–∞–º–∏ TXT-–∑–∞–ø–∏—Å –æ—á—ñ–∫—É–≤–∞–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–Ω—é.

- –£—Å–ø—ñ—Ö: –Ø–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è —Å–ø—ñ–≤–ø–∞–¥–∞—î, Certbot –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç—å —Ç–∞ –∑–±–µ—Ä–µ–∂–µ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç —É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó `/etc/letsencrypt/live/solar.levych.com/`.
- –ü–æ–º–∏–ª–∫–∞: –Ø–∫—â–æ –∑–∞–ø–∏—Å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∞–±–æ –≤—ñ–Ω –Ω–µ–≤—ñ—Ä–Ω–∏–π, Certbot –ø–æ–≤—ñ–¥–æ–º–∏—Ç—å –ø—Ä–æ –ø–æ–º–∏–ª–∫—É.

**–í–ê–ñ–õ–ò–í–û:** –¶–µ–π TXT-–∑–∞–ø–∏—Å —î —Ç–∏–º—á–∞—Å–æ–≤–∏–º. –í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –π–æ–≥–æ –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞. –û–¥–Ω–∞–∫, –π–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–¥–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∑–Ω–æ–≤—É –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ.

–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –∑–∞–ø–∏—Å –æ–Ω–æ–≤–∏–≤—Å—è –º–æ–∂–Ω–∞ —Ç—É—Ç: https://toolbox.googleapps.com/apps/dig/#TXT/_acme-challenge.solar.levych.com


–©–æ–± –∑–º—É—Å–∏—Ç–∏ –≤–∞—à –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–≤—ñ–∂–æ–æ—Ç—Ä–∏–º–∞–Ω–∏–π —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –π–æ–≥–æ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏.

```bash
sudo systemctl reload nginx
# –ê–±–æ, —è–∫—â–æ reload –Ω–µ —Å–ø—Ä–∞—Ü—é—î:
# sudo systemctl restart nginx
```